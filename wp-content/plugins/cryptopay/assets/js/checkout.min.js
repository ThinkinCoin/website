($=>{$(document).ready(()=>{let startedApp;function handleUnloadEvent(){if(-1===navigator.userAgent.indexOf("MSIE")&&!document.documentMode)return!0;e.preventDefault()}function printError(errorMessage){var scrollElement;$(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),$form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+errorMessage+"</div>"),$form.removeClass("processing").unblock(),$form.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),(scrollElement=(scrollElement=$(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout")).length?scrollElement:$form).length&&$("html, body").animate({scrollTop:scrollElement.offset().top-100},1e3),$(document.body).trigger("checkout_error",[errorMessage])}async function checkFormProcess(network,currency){let data=$form.serialize();var params=CryptoPayVars.params||{},params=(data=(data=(data+="&cp_params="+JSON.stringify(params))+("&cp_network="+JSON.stringify(network)))+("&cp_currency="+JSON.stringify(currency)),await new Promise(resolve=>{$.ajax({data:data,type:"POST",dataType:"json",url:wc_checkout_params.checkout_url,success:function(response){if($(window).off("beforeunload",handleUnloadEvent),response.success)$(".woocommerce-NoticeGroup-checkout").remove(),response.data&&response.data.init&&startedApp.store.payment.setInit(response.data.init),resolve(null);else{if(response.data){if(!0===response.data.reload)return void window.location.reload();!0===response.data.refresh&&$(document.body).trigger("update_checkout")}response.message||response.messages?printError(response.message||response.messages):printError('<div class="woocommerce-error">'+CryptoPayLang.defaultErrorMsg+"</div>"),resolve({error:!0})}},error:function(jqXHR,textStatus,errorThrown){$(window).off("beforeunload",handleUnloadEvent),printError('<div class="woocommerce-error">'+(errorThrown||CryptoPayLang.defaultErrorMsg)+"</div>"),resolve({error:!0})},complete:function(){cpHelpers.closePopup(),CryptoPayApp.dynamicData.add({wcForm:cpHelpers.formToObj("form.checkout")})}})}));return params}$form=$("form.checkout"),CryptoPayConfig.init?(CryptoPayApp.events.add("init",async ctx=>{ctx.disableAutoQr=!0},"wc_checkout"),CryptoPayApp.events.add("payNow",ctx=>(cpHelpers.waitingPopup(CryptoPayLang.checkingForm),checkFormProcess(ctx.network,ctx.order.paymentCurrency)),"wc_checkout")):CryptoPayApp.events.add("init",async ctx=>{Object.assign(ctx,await checkFormProcess(ctx.network,ctx.currency))},"wc_checkout"),$(document).on("updated_checkout",function(){startedApp?startedApp.reStart(CryptoPayVars.order):startedApp=CryptoPayApp.start(CryptoPayVars.order)}),$("form.checkout").on("change",'input[name="payment_method"]',function(){$(document.body).trigger("update_checkout")})})})(jQuery);
//# sourceMappingURL=checkout.min.js.map
